%% Formatting packages-----------%-------------------------------
\usepackage{multicol}
\providecommand{\printname}{Jonathan C.\ Lighthall}
\newcommand{\shortname}{J.\ C.\ Lighthall}

\InputIfFileExists{../ltr/letter_layout}{}{%
\InputIfFileExists{../../ltr/letter_layout}{}{\errmessage{letter_layout.tex not found!}}}

\graphicspath{{../ltr/signatures/}{../../ltr/signatures/}}

\def\reducemargin{0.25in}%text width is set to 6.25in with 1.25" margin
\addtolength{\textwidth}{\reducemargin}		
\addtolength{\hoffset}{-\reducemargin} 

\newcommand{\boldtext}[1]{\textbf{\scshape\normalsize#1}}
\newcommand{\desctext}[1]{\textit{\normalsize#1}}
\newcommand{\headtext}[1]{\textit{\normalsize#1}}

\renewcommand{\nameaddress}[1]{
\boldtext{\printname}\\
%\addressprefix
#1%
%\homeaddress
%\workaddress
\addresssuffix
}

\renewcommand{\authname}{\printname}
\renewcommand{\doctitle}{\shortname~CV}
\hypersetup{
  pdfauthor=\authname,           %Adds author name to PDF properties
  pdftitle=\doctitle,            %Adds thesis title to PDF properties
  pdfstartpage=1,                %Opening page number (absolute)
  pdfstartview={XYZ null null 1},%view page at 100%
	urlcolor=blue,                  
}

%% Bibliography packages---------%-------------------------------
\usepackage{multibib}
%% Multibib generates multiple bibliographic sections.  Each bibliography requires a separate
%% .bbl file which is generated from an .aux file by BibTex.  This can be done manually or with
%% a script.  For example, create a batch file in the current directory with the following
%% contents:
%% for %%f in (*.aux) do "C:\Program Files\MiKTeX 2.9\miktex\bin\bibtex.exe" %%~nf
%% Then, define a new output profile (in TeXnicCenter) and enter the path of the new batch
%% file in the Path to BibTex executable field.
%\IfFileExists{multibib.bat}{}{\errmessage{Batch file for multibib not found}}
\newcites{talk}{Presentations}
\newcites{proc}{Proceedings}
\newcites{invi}{Invited Talks}

%% Application/CV settings-------%-------------------------------
\usepackage{lastpage}
\usepackage{sectsty}
\sectionfont{\boldtext} %use 

\newcommand{\heliosonly}[1]{#1}
\newcommand{\jclonly}[1]{#1}

\newcommand{\desc}[1]{%this environment provides an added description of the current item
\renewenvironment{quote}{%
\list{}{%
    \setlength{\leftmargin}{22pt}
    %\rightmargin0pt%\leftmargin
		\setlength{\itemsep}{0pt}
	\setlength{\parskip}{0pt}
	\setlength{\parsep}{0pt}
	\setlength{\topsep}{0pt}
	\setlength{\partopsep}{0pt}
  }
  \item\relax
}
{\endlist}
\begin{quote}
%\vspace*{-0.35\baselineskip}%
%\textit
\desctext
{#1}% \the\leftmargin, \the\rightmargin
%\vspace*{-0.35\baselineskip}%
\end{quote}
}

\renewenvironment{itemize}%
{ \begin{list}%
   {\textbullet}% set bullet type here
   {%
	%\setlength{\topsep}{0pt}
	%\setlength{\partopsep}{0pt}
  \setlength{\itemsep}{0pt}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}
		}
		}%
{ \end{list} }

%% Definitions for extras
\newcommand{\extra}[1]{{\color{note_gray}#1}} %print extra items in gray
%\renewcommand{\extra}[1]{#1} %Enters "notes" into text
%\renewcommand{\extra}[1]{} %Deletes "notes"

%% CV letter wrapper - use to wrap the CV with a cover letter
\newcommand{\cvwrapper}[3] {%three arguments: pagestyle, right header, text
\clearpage
\pagestyle{#1}
\rhead{\headtext{#2}}
\phantomsection
\addcontentsline{toc}{chapter}{#2}
\begin{changemargin}{\indent}
\nameaddress{\workaddress}\\
\\
\displaydate{letterdate}
\end{changemargin}

\vspace*{2.0\baselineskip}%triple space
\noindent \recip{} \comp{}\\
\recipaddress{}
\vspace*{1.0\baselineskip}%double space

\noindent
To Whom It May Concern at \recip,\\
%Dear \recip,\\

#3\vspace*{1.0\baselineskip}%double space
\sign{}
}

\newcommand{\cvwrappersimple}[3] {%three arguments: pagestyle, right header, text
\clearpage
\pagestyle{#1}
\rhead{\headtext{#2}}
\phantomsection
\addcontentsline{toc}{chapter}{#2}
\begin{changemargin}{\indent}
\nameaddress{\workaddress}\\
\\
\displaydate{letterdate}
\end{changemargin}
\vspace*{2.0\baselineskip}%triple space
#3\vspace*{1.0\baselineskip}%double space
}

%%-----------------------------------------------------------------------------------------------
%% Builing commands
%%-----------------------------------------------------------------------------------------------
\newcommand{\cvonly}{%Generate a stand-alone CV
\addcontentsline{toc}{chapter}{Contact Information}
\input{cv_body}
}

\newcommand{\includepubs}{%
%% Set automatic publication list filters here
\renewcommand{\heliosonly}[1]{}
%\renewcommand{\jclonly}[1]{}
%% Include publication lists here
\input{cv_pubs}
\input{cv_talks}
}

\newcommand{\cvandpubs}{%Create CV and publication list as one document
\cvonly
%\rhead{\headtext{\docsubtitle}}
\includepubs
}

\newcommand{\docsubtitle}{Publication List}
\newcommand{\cvandpubsbreak}{%Insert a page break between CV and publication list
\cvonly
\newpage
\rhead{\headtext{\docsubtitle}}
\includepubs
}

\newcommand{\publistonly}{%Generate a stand-alone publication list
\renewcommand{\doctitle}{\shortname~\docsubtitle}
\hypersetup{pdftitle=\doctitle} 
\pagestyle{fancy}
\lhead{\boldtext{\shortname}}
\rhead{\headtext{\docsubtitle}}
\includepubs
}

%\usepackage[explicit]{titlesec}
%\usepackage{everyshi}% http://ctan.org/pkg/everyshi
%\usepackage{etoolbox}% http://ctan.org/pkg/etoolbox
%\makeatletter
%
%\titleformat{name=\section,numberless}
  %{\scshape\bfseries\normalsize}
  %{}
  %{0pt}
  %{\gdef\@section@title@{#1 (continued)}#1}
%
%\titlespacing{\section}
  %{0pt}
  %{3ex plus 2ex minus 1ex}
  %{1ex plus .5ex minus .5ex}
%
%\let\@section@title@\relax% Sectional heading storage
%%\def\print@section@title@{%
  %%{\noindent\scshape\bfseries\normalsize\@section@title@}\par\vspace{1ex plus .5ex minus .5ex}%
%%}
%%\EveryShipout{%
  %%\ifdim\pagetotal>\pagegoal% There is content overflow on this page
    %%\aftergroup\print@section@title@% Reprint/-insert sectional heading
  %%\fi%
%%}
%\makeatother

%\usepackage{titlesec}
%\usepackage{everyshi}
%\makeatletter
%%\titleformat{name=\section,numberless}
  %%{\scshape\bfseries\normalsize}
  %%{}
  %%{0pt}
  %%{\gdef\@section@title@{#1 (continued)}#1}
%
%\titlespacing{\section}
  %{0pt}%indent
  %{3ex plus 2ex minus 1ex}%headspace
  %{1ex plus .5ex minus .5ex}
	%
	%%\let\@section@title@\relax% Sectional heading storage
%\def\print@section@title@{%
  %{\noindent\scshape\bfseries\normalsize\@section@title@}\par\vspace{1ex plus .5ex minus .5ex}%
%}
%%\EveryShipout{%
  %%\ifdim\pagetotal>\pagegoal% There is content overflow on this page
    %%\aftergroup\print@section@title@% Reprint/-insert sectional heading
  %%\fi%
%%}
%\makeatother
